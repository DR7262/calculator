<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    <main class = 'main'>
        <h1>Calculator</h1>
        <div id = 'calculator'>
            <div id = 'screen'>
                <div class = 'past Display'></div>
                <div class = 'current Display'></div>
            </div>
            <div id = 'buttons'>
                <button onclick = clearScreen() class = 'key' data-key = 'clear' id = "clearBtn">Clear</button>
                <button class = 'key' data-key = 'Backspace' id = "backspaceBtn">Del</button>
                <button class = 'key' data-key = '/'>รท</button>
                <button class = 'key' data-key = '7'>7</button>
                <button class = 'key' data-key = '8'>8</button>
                <button class = 'key' data-key = '9'>9</button>
                <button class = 'key' data-key = '*'>ร</button>
                <button class = 'key' data-key = '6'>6</button>
                <button class = 'key' data-key = '5'>5</button>
                <button class = 'key' data-key = '4'>4</button>
                <button class = 'key' data-key = '-'>-</button>
                <button class = 'key' data-key = '3'>3</button>
                <button class = 'key' data-key = '2'>2</button>
                <button class = 'key' data-key = '1'>1</button>
                <button class = 'key' data-key = '+'>+</button>
                <button class = 'key' data-key = '.'>.</button>
                <button class = 'key' data-key = '0'>0</button>
                <button class = 'key' data-key = '=' id = 'equalsBtn'>=</button>
            </div>
        </div>
    </main>
</body>
<script>
    let currentDisplay = document.querySelector('.current.Display');
    let pastDisplay = document.querySelector('.past.Display');

    let buttons = document.querySelectorAll('button');

    let periodStatus = false;

    var isNumber = function isNumber(value) {
            return typeof value === 'number' && isFinite(value);
    };

    function animateButton(e) {
        let btn = document.querySelector(`.key[data-key="${e.key}"]`)
        btn ? btn.classList.add('active') : '';
    };

    function clearScreen() {
        currentDisplay.innerHTML = '';
        pastDisplay.innerHTML = '';
        periodStatus = false;
    };

    function backspace() {
        currentDisplay.innerHTML = currentDisplay.innerHTML.slice(0, -1);
    };

    function printKey(key) {
        currentDisplay.append(key);
    };

    function printPeriod(key) {
        if (periodStatus == false) {
            periodStatus = true;
            printKey(key);
        };
    };

    function handleInput(key) {
        if (key >= 0 && key <= 9) printKey(key);
        if (key == '.') printPeriod(key);
        if (key == 'Backspace') backspace();
        if (key == '-' || key == '+' || key == '*' || key == '/') printKey(key);
    };

    buttons.forEach(button => {
        button.addEventListener('click', function(e) {
            handleInput(e.currentTarget.dataset.key)
        });
    })
        
    window.addEventListener("keydown", function(e) {
        handleInput(e.key)
        animateButton(e);
    });

    window.addEventListener("keyup", function(e) {
        const btn = document.querySelector(`.key[data-key="${e.key}"]`);
        btn ? btn.classList.remove('active') : '';
    });
</script>
</html>